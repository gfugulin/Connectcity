FROM debian:stable-slim AS build
RUN apt-get update && apt-get install -y build-essential && rm -rf /var/lib/apt/lists/*
WORKDIR /src
COPY core-c /src/core-c
RUN make -C /src/core-c

FROM debian:stable-slim
WORKDIR /opt/conneccity
COPY --from=build /src/core-c/build/libconneccity.so /opt/conneccity/lib/
